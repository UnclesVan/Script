local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()

local Window = Fluent:CreateWindow({
    Title = "Fluent " .. Fluent.Version,
    SubTitle = "by dawid",
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 460),
    Acrylic = true,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.LeftControl
})

local Tabs = {
    ScriptHub = Window:AddTab({ Title = "Script Hub", Icon = "leaf" }),
    AutoFarm = Window:AddTab({ Title = "Auto Farm", Icon = "money" }),
    Visuals = Window:AddTab({ Title = "UI Visual", Icon = "paintbrush" })
}

-- SCRIPT HUB TAB
do
    -- Prodigy X Script
    Tabs.ScriptHub:AddButton({
        Title = "Execute Prodigy X Script",
        Description = "Load Prodigy X script from GitHub.",
        Callback = function()
            loadstring(game:HttpGet(('https://raw.githubusercontent.com/ReQiuYTPL/hub/main/ReQiuYTPLHub.lua'), true))()
        end
    })

    -- TBI PET FARM
    Tabs.ScriptHub:AddButton({
        Title = "Execute TBI Pet Farm",
        Description = "Load TBI Pet Farm script.",
        Callback = function()
            loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/c29af06acdb7a80fb239415fd322efe9.lua"))()
        end
    })

    -- TBI HOUSE CLONER
    Tabs.ScriptHub:AddButton({
        Title = "Execute TBI House Cloner",
        Description = "Load TBI House Cloner script.",
        Callback = function()
            loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/a1785d95674fad4fef000612f70f2608.lua"))()
        end
    })
end

-- AUTOFARM TAB
do
    -- TBI ICE DIMENSION FARM
    Tabs.AutoFarm:AddButton({
        Title = "Execute TBI Ice Dimension Farm",
        Description = "Load TBI Ice Dimension Farm script.",
        Callback = function()
            loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/101333658c343905d93a1433b9916ebc.lua"))()
        end
    })

    -- Toggle for Circle Teleportation
    local CircleTeleportationActive = false

    local CircleToggle = Tabs.AutoFarm:AddToggle("CircleTeleportation", 
    {
        Title = "Toggle Circle Teleportation",
        Description = "Turn off or on circle teleportation to: workspace.Interiors.IceDimension.JoinZones.IceCubeHillMinigame.Ring",
        Default = false,
        Callback = function(state)
            CircleTeleportationActive = state
            
            if state then
                print("Circle Teleportation Enabled")

                -- Start teleportation logic in a spawn thread to avoid blocking the UI
                spawn(function() 
                    while CircleTeleportationActive do
                        local player = game.Players.LocalPlayer
                        if player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                            player.Character.HumanoidRootPart.CFrame = workspace.Interiors.IceDimension.JoinZones.IceCubeHillMinigame.Ring.CFrame
                        end

                        -- Wait for 7 seconds before the next teleport
                        wait(7)
                    end
                end)

                print("Circle Teleportation Stopped")
            else
                print("Circle Teleportation Disabled")
            end
        end 
    })
end

-- UI VISUAL TAB
do
    -- CANDY DISPLAY
    Tabs.Visuals:AddButton({
        Title = "Execute Candy Display",
        Description = "Load Candy Display UI.",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/UnclesVan/AdoptMeHalloWeenUis/refs/heads/main/CandyUiLoader.lua"))()
        end
    })

    -- SHARDS DISPLAY
    Tabs.Visuals:AddButton({
        Title = "Execute Shards Display",
        Description = "Load Shards Display UI.",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/UnclesVan/AdoptMeHalloWeenUis/refs/heads/main/ShardsDisplay"))()
        end
    })

    -- CIRCLE DISPLAY
    Tabs.Visuals:AddButton({
        Title = "Execute Circle Timer Display",
        Description = "Load Circle Timer UI.",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/UnclesVan/AdoptMeHalloWeenUis/refs/heads/main/CircleTimer"))()
        end
    })
end

-- Initialize SaveManager and InterfaceManager
do
    SaveManager:SetLibrary(Fluent)
    InterfaceManager:SetLibrary(Fluent)

    SaveManager:IgnoreThemeSettings()
    SaveManager:SetIgnoreIndexes({})
    InterfaceManager:SetFolder("FluentScriptHub")
    SaveManager:SetFolder("FluentScriptHub/specific-game")

    InterfaceManager:BuildInterfaceSection(Tabs.Visuals)
    SaveManager:BuildConfigSection(Tabs.Visuals)
end

-- Notify the user that the script is loaded
Fluent:Notify({
    Title = "Fluent",
    Content = "The script has been successfully loaded.",
    Duration = 8
})

-- Load the autoload config if there is one
SaveManager:LoadAutoloadConfig()
